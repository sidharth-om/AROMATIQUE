"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[94978],{344184:(e,t,n)=>{n.d(t,{Z:()=>r,v:()=>a});let a=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function r(){if(!a())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},787642:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(667294),r=n(967312);function i(){let{checkExperiment:e}=(0,r.F)();return{activateLOPUnauthHoldoutExperiments:(0,a.useCallback)(()=>{e("unauth_h2_upsells_holdout")},[e]),userIsEligibleForShippedLOPExperiment:()=>"holdout"!==e("unauth_h2_upsells_holdout").group}}},158759:(e,t,n)=>{n.d(t,{Mt:()=>E,NK:()=>v,P6:()=>i,ZE:()=>h,Zt:()=>g,_J:()=>o,_S:()=>b,cL:()=>_,iR:()=>y,jL:()=>s,oN:()=>r,oU:()=>S,rM:()=>m,sV:()=>d,sY:()=>c,vj:()=>f,yp:()=>l});var a=n(606688);let r=5e3,i=5e3/a.gJ,l="Pin page",u=["Uploaded by user"],s=(e,t)=>!!t&&!e,o=e=>!!e&&5!==e,d=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,p=e=>"pinstory"===e,_=({embedSrc:e,embedSubtype:t,embedType:n})=>!!e&&!c(n)&&!p(t),m=({link:e,mobileLink:t,trackedLink:n,utmLink:a})=>!t&&!a&&!n&&!e,h=e=>/pin.it/gim.test(e||""),g=({link:e,mobileLink:t,origImageUrl:n,trackedLink:a,utmLink:r})=>t||r||a||e||n||"",f=e=>"string"==typeof e&&(e.includes("#recipe")||e.includes("#:~:text=")),v=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function b(e){for(let t of u)if(e===t)return!1;return!0}function y(e){if(!e)return!1;let{id:t,videos:n}=e;if(t&&n?.id&&n.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:a}=n.video_list;if(e&&w(e)||t&&w(t)||a&&w(a))return!0}let a=e.story_pin_data?.pages?.[0]?.blocks;if(a){for(let e of a)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function w(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function E(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function S({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!E(t)}},859492:(e,t,n)=>{n.d(t,{kt:()=>h,fs:()=>d,eK:()=>p,Ly:()=>_,BY:()=>m,bN:()=>g,jM:()=>c,RC:()=>s,EU:()=>o});let a=/\s\s+/g,r=e=>e.replace(a," ");var i=n(438711),l=n(112800);let u=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),s=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,o=(e,t)=>e?e.trim().length>t?(0,i.ZP)(e.trim(),t).trim():e.trim():"",d=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:i})=>{let l=i||e,u=o(t,200);return u?u:n?n:a?a:r&&l?l:null},c=({closeupUnifiedDescription:e,pinDescription:t})=>r((0,i.ZP)(e||t||"",496)).trim(),p=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],a=e.pinJoinAnnotationsWithLinks||{},l=e.richMetadataDescription||"",u=e.closeupUnifiedDescription||"",s=n.map(e=>(a||{})[e]||{name:e,url:""}),o="",d=(t||"").toLocaleLowerCase().trim(),c=l.toLocaleLowerCase().trim(),p=u.toLocaleLowerCase().trim();return u&&u.length>3&&p!==d?o=u:l&&l.length>3&&c!==d&&(o=l),o&&(o=r((0,i.ZP)(o,496)).trim()),{description:o,annotationsWithLinks:s}},_=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:i,pinJoinVisualAnnotation:s,seoNoindexReason:c,shouldLogUnauthTitle:p,shouldUseSimplifiedTitle:_=!1})=>(p&&(0,l.My)("unauth_closeup.pin_title",{useSeoFallback:u.has(c??""),gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,isStoryPin:!!r,storyPinDataMetadataPinTitle:i||"",pinJoinVisualAnnotation:s?.[0],pinTitle:e,seoNoindexReason:c}),u.has(c??""))?s?.[0]??" ":_?o(t,200)||s?.[0]||"":d({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:i})||s?.[0]||e,m=e=>`/pin/${e}/`,h=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},g=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:m(e)},217599:(e,t,n)=>{n.d(t,{X:()=>a});let a="favorited"},942730:(e,t,n)=>{n.d(t,{kf:()=>g,l5:()=>m,of:()=>p,xC:()=>h,yz:()=>_});var a=n(667294),r=n(218291),i=n(520949),l=n(755090),u=n(839284),s=n(992114),o=n(785893);let{Provider:d,getMaybe:c}=(0,r.Z)("PwaContext"),p=({children:e,initialContext:t})=>{let[n,r]=(0,a.useState)(null),u=t||{pwaType:"unknown",twaType:null},c=u.pwaType;(0,l.Z)(()=>{let e=(0,i.FB)(window)||"unknown";r(e),c!==e&&(0,s.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let p="unknown"===c&&n?n:c,{twaType:_}=u,m=(0,a.useMemo)(()=>({pwaType:p,twaType:_}),[p,_]);return(0,o.jsx)(d,{value:m,children:e})},_=()=>{let e=c();return e?.pwaType??"unknown"},m=()=>{let e=c();return e?.twaType??null},h=()=>"android-twa"===_(),g=()=>{let e=_(),t=(0,u.Z)();return"unknown"===e&&t?null:"windows"===e}},177270:(e,t,n)=>{n.d(t,{H5:()=>f,Xn:()=>h,Yf:()=>w,an:()=>g});var a=n(890360),r=n(50113),i=n(857147);let l="BING",u="GOOGLE",s="YAHOO",o="YANDEX",d="RAKUTEN",c="NAVER",p="AMP_CACHE",_="DUCKDUCKGO",m=[u,l,s,o,d,c,p,_];function h(e){return m.includes(function(e){let{hostname:t}=(0,i.Qc)(e,!0);if(t&&e){if(t.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return u;else if(t.includes("bing."))return l;else if(t.includes("yahoo."))return s;else if(t.includes("yandex."))return o;else if(t.includes("rakuten."))return d;else if(t.includes("naver."))return c;else if(t.includes("duckduckgo."))return _;else if(t.includes(".cdn.ampproject.org"))return p}return""}(e))}function g(e){return e||"undefined"!=typeof document&&document.referrer||""}let f=e=>{let t=new URL(e);return t.searchParams.set("nii","t"),t.href},v=e=>"/"!==e[e.length-1]?`${e}/`:e,b=e=>{let t=v(e),n=(0,a.ll)({url:t});if((0,a.L6)(n))return"PIN";if((0,a.am)(n))return"BOARD";if((0,r.Z)(n))return"PROFILE";if((0,a.bo)(n))return"TODAY";if((0,a.z_)(n))return"IDEA";else if((0,a.R$)(n))return"SHOPPING";return"UNKNOWN"},y=({selector:e,skipExternal:t})=>{let n=Array.from(document.querySelectorAll(e)),a={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},r=new Set;return n.forEach(e=>{let n=e.getAttribute("href");if(!n||n.startsWith("#")||t&&n.startsWith("http")&&!n.includes(window.location.hostname))return;let i=v(n);if(r.has(i))return;r.add(i);let l=b(i);"PIN"===l?a.pin.push(i):"BOARD"===l?a.board.push(i):"PROFILE"===l?a.user.push(i):"TODAY"===l?a.today.push(i):"IDEA"===l?a.idea.push(i):"SHOPPING"===l&&a.shopping.push(i)}),a},w=({country:e,language:t,isBot:n,hostname:a,pathname:r})=>({domain:a,country:e,language:t,currentUrl:r,pageType:b(r),referrer:document.referrer,isBot:n,links:y({selector:"a[href]",skipExternal:!0})})},54368:(e,t,n)=>{n.d(t,{o$:()=>a,ty:()=>r,uH:()=>i});let{Provider:a,MaybeConsumer:r,getMaybe:i}=(0,n(218291).Z)("inviteContext")},753934:(e,t,n)=>{n.d(t,{M:()=>l,Q:()=>i});var a=n(667294);let r=(0,a.createContext)(null),i=()=>(0,a.useContext)(r),l=r},712151:(e,t,n)=>{n.d(t,{Z:()=>a});let a=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},527075:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(20256),r=n(233846),i=n(928362),l=n(174646),u=n(785893);let s={SELECTED:"#000000",NOT_SELECTED:"#ffffff"};function o({selected:e=!1,disableIcon:t}){let n=(0,r.ZP)(),{isRTL:o}=(0,l.B)();return(0,u.jsxs)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?s.SELECTED:s.NOT_SELECTED,borderRadius:i.Oc,boxShadow:e?"inset 0 0 0 3px #fff":void 0}},"data-test-id":"pinRepSelectionBorder",left:!0,position:"absolute",right:!0,top:!0,zIndex:new a.Ry(1),children:[e&&(0,u.jsx)(a.xu,{alignItems:"center",bottom:!0,color:"dark",display:"flex",height:24,justifyContent:"center",left:o,margin:3,position:"absolute",right:!o,rounding:2,width:24,children:(0,u.jsx)(a.JO,{accessibilityLabel:n._('Check icon', 'pinRepSelectionBorder.checkIcon', 'Accessibility label for check icon on selected Pin'),color:"inverse",icon:"check",size:12})}),!e&&!t&&(0,u.jsx)(a.xu,{left:o,margin:3,position:"absolute",right:!o,top:!0,children:(0,u.jsx)(a.JO,{accessibilityLabel:n._('Handle icon', 'pinRepSelectionBorder.handleIcon', 'Accessibility label for handle icon on an organizable Pin'),color:"light",icon:"handle",size:24})})]})}},717574:(e,t,n)=>{n.d(t,{K:()=>l,T:()=>u});var a=n(667294),r=n(785893);let i=(0,a.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),l=()=>(0,a.useContext)(i);function u({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),l=(0,a.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:a})=>n({...t,[e]:a})}),[t]);return(0,r.jsx)(i,{value:l,children:e})}},118922:(e,t,n)=>{n.d(t,{ET:()=>l,JH:()=>s,UQ:()=>u,WG:()=>d,yh:()=>c});var a=n(667294),r=n(218291),i=n(785893);let l={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},u={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},s={COLORS:"COLORS",CREATED_BY_ME:"CREATED_BY_ME",FAVORITED:"FAVORITED",FAVORITED_AND_CREATED:"FAVORITED_AND_CREATED_BY_ME",INTERESTS:"INTERESTS",NONE:""},{Provider:o,getMaybe:d}=(0,r.Z)("ProfileViewContext");function c({children:e}){let[t,n]=(0,a.useState)(),[r,l]=(0,a.useState)(new Map),[u,d]=(0,a.useState)(),[c,p]=(0,a.useState)(),[_,m]=(0,a.useState)(s.NONE),[h,g]=(0,a.useState)(0),[f,v]=(0,a.useState)(),b=(0,a.useCallback)((e,t)=>{l(new Map(r.set(e,t)))},[r]),y=(0,a.useMemo)(()=>({boardPinDensity:t,boardSortOrder:r,profileBoardView:u,profilePinDensity:c,profileFollowingSelectedIndex:h,selfProfilePinFilter:_,setBoardPinDensity:n,setSelfProfilePinFilter:m,updateBoardSortOrder:b,selfProfileBoardFilter:f,setSelfProfileBoardFilter:v,setProfileBoardView:d,setProfilePinDensity:p,setProfileFollowingSelectedIndex:g}),[t,r,u,c,h,_,f,b]);return(0,i.jsx)(o,{value:y,children:e})}},63500:(e,t,n)=>{n.d(t,{dL:()=>u,fJ:()=>o,gC:()=>s});var a=n(545007),r=n(218291),i=n(785893);let{Provider:l,get:u}=(0,r.Z)("Boards");function s(){let e=u();return t=>e[t]}function o({children:e}){let t=(0,a.v9)(({boards:e})=>e,a.wU);return(0,i.jsx)(l,{value:t,children:e})}},864548:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(545007);let r=()=>(0,a.v9)(({session:{canUseNativeApp:e}})=>e)},924926:(e,t,n)=>{n.d(t,{$:()=>u,w:()=>s});var a=n(667294),r=n(218291),i=n(785893);let{Provider:l,getMaybe:u}=(0,r.Z)("CloseupPreviewContext");function s({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,i.jsx)(l,{value:r,children:e})}},21642:(e,t,n)=>{n.d(t,{$p:()=>S,_l:()=>P,cO:()=>E,t2:()=>k,w2:()=>C,xM:()=>w});var a=n(667294),r=n(616550),i=n(890360),l=n(967312),u=n(174646),s=n(113474),o=n(857147),d=n(538645),c=n(882368),p=n(785893);let _="UnauthDesktopSocialPinLandingPageContext",m="UnauthMobileSocialPinLandingPageContext",h="AthDesktopSocialPinLandingPageContext",g="AuthMobileSocialPinLandingPageContext",f=(0,a.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),v=({children:e})=>{let[t,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),[l,u]=(0,a.useState)(!1),[s,o]=(0,a.useState)(""),d=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:r,setHasSeenAuthDesktopLandingToast:i,hasDismissedLoginModal:l,setHasDismissedLoginModal:u,pinImageUrl:s,setPinImageUrl:o}),[t,r,l,u,s,o]);return(0,p.jsx)(f,{value:d,children:e})},b=(0,a.createContext)({key:"",data:null}),y=({children:e})=>{let t=(0,r.TH)(),{isSocialBot:n,isBot:v}=(0,u.B)(),y=(0,c.Z)(),w=y&&y.isAuth,E=(0,d.HG)(),S=(0,a.useMemo)(()=>(0,i.fY)(t)&&(0,o.mB)(t.search).invite_code||"",[t]),P=(0,a.useMemo)(()=>{let e=(0,r.LX)(t.pathname,{path:"/pin/:id"});return String(e&&"id"in e.params&&e.params.id)||""},[t.pathname]),[k,C]=(0,a.useState)({key:"",data:null}),A=!w&&E,O=!w&&!E,{checkExperiment:x}=(0,l.F)(),{hasDismissedLoginModal:I}=(0,a.useContext)(f),{inDwebUnauthSocialPinLandingExp:M,unauthDwebSocialPinLandingGroup:D,inMwebUnauthSocialPinLandingExp:R,unauthMwebSocialPinLandingGroup:L,inMwebUnauthSocialPinLandingSecondaryUpsellExp:N,unauthMwebSocialPinLandingSecondaryUpsellGroup:U}=(0,a.useMemo)(()=>{let e=!v&&!n&&A&&S&&x("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},t=!v&&!n&&O&&S&&(x("mweb_q2_mau_push_pc").anyEnabled&&x("mweb_q2_mau_push_pc")||x("mweb_q2_mau_push_pc_eu").anyEnabled&&x("mweb_q2_mau_push_pc_eu")||x("mweb_q2_mau_push_pc_advanced").anyEnabled&&x("mweb_q2_mau_push_pc_advanced")||x("mweb_q2_mau_push_pc_advanced_row").anyEnabled&&x("mweb_q2_mau_push_pc_advanced_row")||x("mweb_q2_mau_push_pc_emergency").anyEnabled&&x("mweb_q2_mau_push_pc_emergency")||x("mweb_q2_mau_push_pc_emergency_row").anyEnabled&&x("mweb_q2_mau_push_pc_emergency_row")||x("sg_mweb_unauth_social_pin_landing_page"))||{anyEnabled:!1,group:void 0},a=t.anyEnabled&&I&&x("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0};return{inDwebUnauthSocialPinLandingExp:e.anyEnabled,unauthDwebSocialPinLandingGroup:e.group,inMwebUnauthSocialPinLandingExp:t.anyEnabled,unauthMwebSocialPinLandingGroup:t.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:a.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:a.group}},[v,n,A,O,S,x,I]),T="enabled_popover_profile"===D,Z=(0,s.Z)(S?{name:"InviteCodeMetadataResource",options:{invite_code:S,field_set_key:T?"default_with_sender_recent_pins":"default"}}:null),j=Z.isLoaded?Z.data:null;(0,a.useEffect)(()=>{if(j){let e=j.sender??null,t=w&&e.id!==y.id&&e?.should_show_messaging&&y.should_show_messaging;if(A&&e){let t=null;t=M?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:D,inviterRecentPins:"enabled_popover_profile"===D&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===D&&e.username||""}:[5,9,12,16].includes(j.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},C({key:_,data:{inviter:e,popoverData:t}})}else if(O&&e){if(R){let t={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:L};N&&(t.secondaryExpGroup=U),C({key:m,data:{upsellData:t}})}}else t&&!E?C({key:g,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:y.id||""},pin:{pinId:P}}}}):t&&E&&C({key:h,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:y.id||""},pin:{pinId:P}}}})}else C({key:"",data:null})},[j,w,E,P,y,M,R,L,O,D,A,N,U]);let H=(0,a.useMemo)(()=>k,[k]);return(0,p.jsx)(b,{value:H,children:e})},w=({children:e})=>(0,p.jsx)(v,{children:(0,p.jsx)(y,{children:e})}),E=()=>{let e=(0,a.useContext)(b);return e.key===_?e:null},S=()=>{let e=(0,a.useContext)(b);return e.key===m?e:null},P=()=>{let e=(0,a.useContext)(b);return e.key===g?e:null},k=()=>{let e=(0,a.useContext)(b);return e.key===h?e:null},C=()=>(0,a.useContext)(f)},869146:(e,t,n)=>{n.d(t,{G3:()=>p,Rp:()=>c,kp:()=>o});var a=n(547504),r=n(838380),i=n(1794),l=n(943369),u=n(756493);let s=14*i.F4,o=(e,t)=>{let n=function(){let e=Date.now(),t=(0,l.M0)(),n=Number(t.getItem(a.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(a.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,u.Nl)().getItem(r.JO)}}();return e?function(e,t,n){let{currentTime:r,firstUpsellTime:i,lastUpsellTime:u,showedAppUpsellCurrentSession:o}=e;return(n=n||s,!i||r<i+t)?!o:!!(r-u>n)&&((0,l.M0)().removeItem(a.O7),!0)}(n,i.F4):function(e,t){let{currentTime:n,lastUpsellTime:a}=e;return t=t||s,!a||n-a>t}(n,t)},d=e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0},c=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat(d(n))}catch(e){return!1}},p=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},507815:(e,t,n)=>{n.d(t,{M:()=>O,v:()=>C});var a=n(667294),r=n(547504),i=n(218291),l=n(180307),u=n(943369),s=n(755090),o=n(69401),d=n(473094);let c=()=>(0,u.M0)().getItem(r.Vb)||[],p=({pinId:e,link:t,imageSignature:n,domain:a})=>{let i=[...c()],l=i.length,s=l?i[0].pinId:"";if(!l||e!==s){let i=(0,d.Z)({pinId:e,link:t,imageSignature:n,domain:a});(0,u.M0)().prependItem(r.Vb,i,o.LG)}},_=()=>(0,u.M0)().getItem(r.ny)||[],m=({query:e,rs:t,scope:n,rg:a})=>{let i=[..._()],l=i.length,s=l?i[0].query:"";if(!l||e!==s){let i=(0,d.Z)({query:e,rs:t,scope:n,rg:a});(0,u.M0)().prependItem(r.ny,i,o.LG)}},h=({query:e})=>{let t=[..._()].filter(t=>t.query!==e);(0,u.M0)().setItem(r.ny,t)};var g=n(225333),f=n(720856),v=n(79947),b=n(785893);let y=(e,t)=>{Object.keys(e).forEach(n=>{"function"!=typeof e[n]&&void 0!==e[n]&&(t[n]=e[n])})},w=()=>(0,u.M0)().getItem(r.s1)??[],E=()=>parseInt((0,u.M0)().getItem(r.rN)||0,10),S=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:a,downloadedPinsCount:r}=e;e.isQUS=Number(t.length>=1||n.length>=3||a.length>=1||r>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,a=new Date,r=new Date(n||a);return Math.max(Math.floor(Number(((a.getTime()-r.getTime())/864e5).toFixed(2))),0)},getSnapshot:function(){let t={};return y(e,t),t}}),P=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:a})=>{let r=(0,l.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:a||"",isAuthenticated:!!e}),i={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:a||"",visitedUnauthPages:[],closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],isQUS:0,revisitationState:(0,g.K7)(),daysSinceLastRevisitation:0,isStorageAllowed:Number(r)};if(e||!i.isStorageAllowed)return Object.freeze({...S(i),...i});i.visitedUnauthPages=(0,v.ZP)(),i.closeupPins=(0,f.Z)(),i.completedSearches=_(),i.clickthroughPins=c(),i.downloadedPinsCount=E(),i.savedPins=w(),i.revisitationState=(0,g.iU)();let u=S(i);return i.daysSinceLastRevisitation=u._getDaysSinceLastRevisitation(),u._updateUnauthUserAggregateDefinitions(),Object.freeze({...u,...i})},{Provider:k,get:C}=(0,i.Z)("UnauthUserStateContext");function A(e,t){let{isAuthenticated:n,countryFromIp:a,countryFromHostName:r,isStorageAllowed:i,regionFromIp:l}=e;if(n||!i)return e;switch(t.type){case"UPDATE":break;case"ADD_UNAUTH_COMPLETED_SEARCH":m(t.payload);break;case"REMOVE_UNAUTH_COMPLETED_SEARCH":h(t.payload);break;case"ADD_UNAUTH_CLICKTHROUGH_PIN":p(t.payload);break;default:return e}return P({isAuthenticated:n,countryFromIp:a,countryFromHostName:r,regionFromIp:l})}function O({children:e,initialState:t}){let[n,r]=(0,a.useReducer)(A,t,P);(0,s.Z)(()=>{r({type:"UPDATE"})});let i=(0,a.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:r}),[n,r]);return(0,b.jsx)(k,{value:i,children:e})}},473094:(e,t,n)=>{n.d(t,{Z:()=>a});let a=function(e){return{...e,ts:Date.now()}}},225333:(e,t,n)=>{n.d(t,{K7:()=>u,Oh:()=>d,Vd:()=>o,WT:()=>l,iU:()=>s});var a=n(547504),r=n(943369),i=n(473094);let l=18e5,u=()=>({count:1,time:0,ts:Date.now()}),s=()=>{try{let{count:e,time:t,ts:n}=(0,r.M0)().getItem(a.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return u()}},o=e=>{(0,r.M0)().setItem(a.SI,(0,i.Z)(e))};function d(){return s().count>1}},749642:(e,t,n)=>{n.d(t,{E:()=>l,S:()=>u});var a=n(667294),r=n(547504),i=n(943369);let l=e=>{let t=(0,i.M0)();e?t.setItem(r.rd,1):t.removeItem(r.rd)},u=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e&&((0,i.M0)().getItem(r.rd)??!1)}},356204:(e,t,n)=>{n.d(t,{$:()=>s,Z:()=>c});var a=n(547504),r=n(838380),i=n(967312),l=n(943369),u=n(756493);let s=2,o=e=>e?.pins??[],d=e=>e.length?{pins:e}:null,c=()=>{let e=(0,l.M0)(),t=o(e.accessAllowed?e.getItem(a.s1):u.ZP.getItem(r.w3)),n=t=>e.accessAllowed?e.setItem(a.s1,d(t)):u.ZP.setItem(r.w3,d(t)),c=s,{checkExperiment:p}=(0,i.F)(),_=()=>{let e=p("mweb_block_unauth_save").group;if(e.startsWith("enabled")){let[,t]=e.split("_");c=Number(t)}let n=p("mweb_q2_mau_push_pc").anyEnabled,a=p("mweb_q2_mau_push_pc_advanced").anyEnabled,r=p("mweb_q2_mau_push_pc_advanced_row").anyEnabled,i=p("mweb_q2_mau_push_pc_emergency").anyEnabled,l=p("mweb_q2_mau_push_pc_emergency_row").anyEnabled,u=p("mweb_q2_mau_push_pc_eu").anyEnabled,s=p("mweb_q2_mau_push_pc_eu_safe").anyEnabled;return(n||a||r||i||l||u||s)&&(c=0),t.length<c};return{pins:t,save:e=>{_()&&n(t.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>n(t.filter(({id:t})=>t!==e)),isSaved:e=>t.some(({id:t})=>t===e),clear:()=>n([]),canSaveMore:_}}},509692:(e,t,n)=>{n.d(t,{B:()=>o,m:()=>s});var a=n(667294),r=n(616550),i=n(218291),l=n(785893);let{Provider:u,getMaybe:s}=(0,i.Z)("NotifDetailRepinContext");function o({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),[i,s]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),c=(0,r.TH)(),p=(0,a.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,a=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{o&&n(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";a.test(t)||e.test(t)||(n(Object.freeze({})),s(!1),d(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=c.pathname||"";return a.test(e)&&i},inNewsHubQuickSaveExp:i,setInNotifDetailPage:d,setInNewsHubQuickSaveExp:s}},[t,i,o,c]);return(0,l.jsx)(u,{value:p,children:e})}},526675:(e,t,n)=>{n.d(t,{Q:()=>s,n:()=>u});var a=n(667294),r=n(218291),i=n(785893);let{Provider:l,getMaybe:u}=(0,r.Z)("RepinContext");function s({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,i.jsx)(l,{value:r,children:e})}},720856:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(69401),r=n(972414),i=n(79947);let l=e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-a.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)},u=()=>l((0,i.ZP)()).map(e=>({...e,id:(0,r.Z)(e.path)||""}))},79947:(e,t,n)=>{n.d(t,{Z4:()=>o,ZP:()=>d,t_:()=>u});var a=n(547504),r=n(69401),i=n(943369),l=n(473094);let u=()=>{let e=(0,i.M0)().getItem(a.pm);return null!==e?JSON.stringify(e):""},s=()=>(0,i.M0)().getItem(a.pm)??[],o=(e,t)=>{let n=[...s()],u=n.length,o=u?n[0].path:"";if(!u||e!==o){let n=(0,l.Z)({path:e,pageType:t});(0,i.M0)().prependItem(a.pm,n,r.LG)}},d=s},85575:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(667294),r=n(992114);function i(e){let t=(0,a.useRef)({kind:"NotOver"}),n=(0,a.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),i=(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,r.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,r.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,r.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,r.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:i}}},118244:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(667294),r=n(276162);let i=(0,a.createContext)(void 0);(0,r.kr)();let l=i}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/94978-4da7b875d5cb4522.mjs.map