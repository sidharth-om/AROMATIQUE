"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[4639,51798],{204112:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});let t={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"inviteType"},{defaultValue:null,kind:"LocalArgument",name:"objectId"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:o=[{alias:null,args:[{kind:"Variable",name:"inviteType",variableName:"inviteType"},{kind:"Variable",name:"objectId",variableName:"objectId"}],concreteType:null,kind:"LinkedField",name:"v3InviteUserExternalQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteUserExternal",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3InviteUserExternal",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:o},params:{id:"9444c7d899b56b0d3f582ffd76e4aa03c97bb76a403a805aeb20150c64ee61d7",metadata:{},name:"ShareInviteCreateExternalInviteGraphQLQuery",operationKind:"query",text:null}};t.hash="cbe2c69120b8bcf572c2bd64e6b7b3fd";let l=t;var i,o,r=t.default||t;if("query"===r.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(r);else{let e=[r.params.name,r.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=r}},669457:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});let t={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"invite_category"},{defaultValue:null,kind:"LocalArgument",name:"url"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateShareLinkGraphQLQuery",selections:o=[{alias:null,args:[{kind:"Variable",name:"inviteCategory",variableName:"invite_category"},{kind:"Literal",name:"name",value:""},{kind:"Variable",name:"url",variableName:"url"}],concreteType:null,kind:"LinkedField",name:"v3CreateShareLinkQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ShareLink",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3CreateShareLink",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"ShareInviteCreateShareLinkGraphQLQuery",selections:o},params:{id:"1a2c34659f0fc64fb8a13ad996b008dbd6b92e50c9b051a13ea424a4eeda7cb4",metadata:{},name:"ShareInviteCreateShareLinkGraphQLQuery",operationKind:"query",text:null}};t.hash="7e0a6acc000f5df88d88c8ea103f3da3";let l=t;var i,o,r=t.default||t;if("query"===r.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(r);else{let e=[r.params.name,r.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=r}},479335:(e,a,n)=>{var t,l;n.r(a),n.d(a,{default:()=>o});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useDownloadImageUnauth_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[t,l],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinGifOrImageSrc_pin"},{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"}],type:"Pin",abstractKey:null};i.hash="c6672a53b22adb94fdbd03277be340a8";let o=i},852450:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinGifOrImageSrc_pin",selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="e4de3c30775bc66fe057a2692ac884eb";let l=t},615027:(e,a,n)=>{var t;n.r(a),n.d(a,{default:()=>i});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};l.hash="b7ea441f2c20a68b323088ebe3847835";let i=l},395986:(e,a,n)=>{n.d(a,{Z:()=>f});var t,l,i=n(167912),o=n(578373),r=n(518761),s=n(397657),d=n(833858),c=n(600009),u=n(183908),_=n(32526);let p={open(e){let a=p._validParams.reduce((a,n)=>(e&&Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]),a),{}),n=p._getDialogType(e),t=p.generateFbRef(e.unauthId??""),l=e.object_type&&e.object_id&&"feed"===n,i=(0,c.Z)(e.path),o=(0,_.Z)();if(o.ptrf&&(i=(0,u.Z)(i,{ptrf:o.ptrf})),l&&(i=(0,u.Z)(i,{fb_ref:t})),a.method=n,"feed"===a.method){let n=(0,r.Z)({width:e.width,height:e.height}),t="http://www.facebook.com/sharer/sharer.php?u="+i;a.picture&&(t+="&picture="+a.picture),a.name&&(t+="&title="+a.name),a.description&&(t+="&description="+a.description),a.caption&&(t+="&caption="+a.caption),window.open(encodeURI(t),"sharer",n)}else"send"===a.method?a.link=i:"share"===a.method&&(a.href=i),(0,d.default)(n=>{n?.getLoginStatus(()=>{if("send"===a.method){let t;n.ui(a);let l=10,i=setInterval(()=>{((t=function(){if(!document)return;let e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe")).filter(e=>e instanceof HTMLIFrameElement);if(e.length)return e.slice(0,e.length-1).forEach(e=>e.parentNode?.removeChild(e)),e[e.length-1]}())||!l)&&(clearInterval(i),t&&p.executeMessengerCallback(t,e.callback)),l-=1},1e3)}else"share"===a.method&&n.ui(a,a=>{l&&a&&!a.error_message&&(0,s.Z)({url:`/v3/log/facebook/feed_share/${e.object_type||""}/${e.object_id||""}/${t}`,method:"PUT",data:{showError:!1}}),e.callback&&e.callback(a)})})},e.viewer)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,a){let n=10,t=setInterval(()=>{let{width:a}=e.style;"0px"!==a&&n||(clearInterval(t),e.style.width="575px"),n-=1},1e3);a&&a()},generateFbRef(e){let a="";for(;a.length<20;)a+=Math.floor(65535*Math.random()).toString(16);return e+":"+a},_getDialogType:e=>p._validOptions.includes(e.type)?e.type:"feed"},m=function(e,a){let n=window.screen.width,t=window.screen.height,l=Math.round((n-e)/2),i=t>a?Math.round((t-a)/2):0;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+a+",left="+l+",top="+i};function g(e,a,n){let t=m(a,n);window.open(e,void 0,t)}let y={DIALOG_WIDTH:510,DIALOG_HEIGHT:525,openDialog(e){g(y._getWindowUrl(e.share_path,e.share_text),y.DIALOG_WIDTH,y.DIALOG_HEIGHT)},_getWindowUrl:(e,a)=>(0,u.Z)("https://social-plugins.line.me/lineit/share",{url:e?(0,c.Z)(e):void 0,text:a})},h={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog(e){g(h._getWindowUrl(e.tweet_path,e.tweet_text),h.DIALOG_WIDTH,h.DIALOG_HEIGHT)},_getWindowUrl:(e,a)=>(0,u.Z)("https://twitter.com/intent/tweet",{via:"pinterest",url:e?(0,c.Z)(e):void 0,text:a||void 0})},b=void 0!==t?t:t=n(204112),w=void 0!==l?l:l=n(669457),v=()=>{let e=(0,i.useRelayEnvironment)();return async(a,n)=>await new Promise((t,l)=>(0,i.fetchQuery)(e,w,{invite_category:n.toString(),url:a}).subscribe({next:e=>t({invite_code:e.v3CreateShareLinkQuery?.data?.inviteCode??"",invite_url:e.v3CreateShareLinkQuery?.data?.inviteUrl??"",title:e.v3CreateShareLinkQuery?.data?.title??""}),error:e=>l(e)}))},k=()=>{let e=(0,i.useRelayEnvironment)();return async(a,n,t,l)=>{let o={invite_category:a,invite_object:n,invite_channel:t};return await new Promise((a,n)=>(0,i.fetchQuery)(e,b,{inviteType:JSON.stringify(o),objectId:l}).subscribe({next:e=>a({invite_code:e.v3InviteUserExternalQuery?.data?.inviteCode??"",invite_url:e.v3InviteUserExternalQuery?.data?.inviteUrl??"",title:e.v3InviteUserExternalQuery?.data?.title??""}),error:e=>n(e)}))}};function f(){let e={pin:1,board:2,pinner:3,article:5,did_it:6,today_article:8,search:0},a=v(),n=k();function t(a,n){let t=e[a.object_type]||0,l=a.invite_channel,i=null==a.invite_category?3:a.invite_category,r=a.object_id;return o.Z.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:i,invite_object:t,invite_channel:l},invite_code:n,object_id:r,client_tracking_params:a.client_tracking_params}).callCreate()}function l(t){let l=e[t.object_type]||0,i=t.invite_channel,o=null==t.invite_category?3:t.invite_category;return 10===o&&t.path?a(t.path,o):n(o,l,i.toString(),t.object_id)}return{ObjectTypeToInviteObject:e,logShareInvite:function(e,a){a&&t(e,a.invite_code)},createShareInviteData:l,shareFacebookInvite:function(e){let{options:a,unauthId:n,viewer:i}=e;return l(a).then(e=>{let l=e.invite_url,o=e.invite_code;if(l){let r={type:"share",object_type:a.object_type,object_id:a.object_id,name:a.name,caption:e.title,description:a.description,path:l,picture:a.picture,callback(e){e&&!e.error_message&&t(a,o)}};p.open({...r,display:"popup",unauthId:n,viewer:i})}return Promise.resolve(e)},e=>Promise.reject(e))},shareTwitterInvite:function(a){let n=e[a.object_type]||0;return l(a).then(e=>{let l=e.invite_url,i=e.invite_code,o=a.description;return 6===n&&a.name&&(o=a.name),o.trim()||(o=`${e.title}
`),l&&h.openDialog({tweet_path:l,tweet_text:o}),t(a,i),Promise.resolve(e)},e=>Promise.reject(e))},shareLineInvite:function(a){let n=e[a.object_type]||0;return l(a).then(e=>{let l=e.invite_url,i=e.invite_code,o=a.description;return 6===n&&a.name&&(o=a.name),o.trim()||(o=`${e.title}
`),l&&y.openDialog({share_path:l,share_text:o}),t(a,i),Promise.resolve(e)},e=>Promise.reject(e))},shareFbMessengerInvite:function(e){let{options:a,unauthId:n,viewer:i}=e;return l(a).then(e=>{let l=e.invite_url,o=e.invite_code;return l&&p.open({type:"send",object_type:a.object_type,object_id:a.object_id,name:a.name,caption:e.title,description:a.description,path:l,picture:a.picture,callback(e){e&&e.success&&t(a,o)},display:"popup",unauthId:n,viewer:i}),Promise.resolve(e)},e=>Promise.reject(e))}}}},883995:(e,a,n)=>{n.d(a,{Z:()=>r});var t=n(859492),l=n(112800);let i=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description"])),o=e=>(e||"").trim().replace(/\s+/g," "),r=({storyPinDataId:e,pinDescription:a,richMetadataDescription:n,richSummaryDisplayName:r,closeupDescription:s,closeupUnifiedDescription:d,seoNoindexReason:c,shouldLogUnauthDesc:u,shouldUseSimplifiedDescription:_=!1})=>(u&&(0,l.My)("unauth_closeup.pin_desc",{useSeoFallback:!!c&&i.has(c??""),isStoryPin:!!e,pinDescription:o(a),closeupUnifiedDescription:o(d),closeupDescription:o(s),richMetadataDescription:o(n)}),c&&i.has(c??""))?"":_?(0,t.jM)({closeupUnifiedDescription:d,pinDescription:a}):o((0,t.eK)({richMetadataDescription:n,richSummaryDisplayName:r,closeupUnifiedDescription:d}).description)||o(d||"")||o(s)||o(a)||o(n)||""},414686:(e,a,n)=>{n.d(a,{Z:()=>s}),n(167912);var t,l=n(78039),i=n(139714),o=n(174646);let r=void 0!==t?t:t=n(852450);function s(e,a,n){let t=(0,l.Z)(r,e),{isBot:s,isSocialBot:d}=(0,o.B)();return(0,i.Z)({embedSrc:t?.embed?.src,embedType:t?.embed?.type,imagesUrls:a,preferredResolution:n??"736x",excludeOriginals:!s&&!d})}},622809:(e,a,n)=>{n.d(a,{Z:()=>o}),n(167912);var t,l=n(78039);let i=void 0!==t?t:t=n(615027),o=e=>{let a=(0,l.Z)(i,e);return[["60x60",a?.imageSpec_60x60],["136x136",a?.imageSpec_136x136],["170x",a?.imageSpec_170x],["236x",a?.imageSpec_236x],["474x",a?.imageSpec_474x],["564x",a?.imageSpec_564x],["736x",a?.imageSpec_736x],["600x315",a?.imageSpec_600x315],["orig",a?.imageSpec_orig]].reduce((e,[a,n])=>n?{...e,[a]:n.url}:e,{})}},833858:(e,a,n)=>{n.r(a),n.d(a,{default:()=>_});var t=n(397657),l=n(750065),i=n(591471),o=n(801888),r=n(142212),s=n(112800);let d=!1,c=e=>e.isAuth&&!!e.facebookId&&!e.isLimitedLogin,u=(e,a,n="en-US",_)=>{_&&(0,s.dy)({event:"load_script_start",provider:"facebook"}),(0,l.Z)((0,o.Z)(n),"FACEBOOK").then(()=>{_&&(0,s.dy)({event:"load_script_success",provider:"facebook"});let n=window.FB;if(!n){_&&(0,s.dy)({event:"global_object_not_found",provider:"facebook"});return}d||(_&&(0,s.dy)({event:"initialize_library",provider:"facebook"}),n.init({appId:r.GHq,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",()=>{c(a)&&u(e=>{if(!e?.getUserID())return;let a=e.getAccessToken();a&&(0,t.Z)({url:"/v3/connect/facebook/",method:"POST",data:{facebook_token:a}})},a)}),d=!0,window.fb_init=i.Z.FINISHED),e(n)}),window.fb_init=i.Z.STARTED},_=u},861084:(e,a,n)=>{n.d(a,{Z:()=>_});var t=n(667294),l=n(20256),i=n(95460),o=n(231333),r=n(233846),s=n(181710),d=n(339908),c=n(785893);let u=(0,t.lazy)(()=>n.e(4603).then(n.t.bind(n,774855,23)));function _({linkURL:e,onDidFocus:a,onDidClickCopyButton:n,onCopyText:t,toastDuration:_,oneToast:p=!1,hideInput:m=!1,buttonSize:g="lg",asLink:y=!1}){let h=(0,r.ZP)(),{showToast:b,showOneToast:w}=(0,d.F9)(),v=h._('Copy link', '[button] copy a URL link shown, to paste in another place', '[button] copy a URL link shown, to paste in another place'),k=(e,a)=>{a&&(p?w:b)(({hideToast:e})=>(0,c.jsx)(o.Z,{duration:_,onHide:e,text:t??h._('Link copied to clipboard!', 'toast message to confirm if users copied the url successfully', 'toast message to confirm if users copied the url successfully')})),n()};return y?(0,c.jsx)(i.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(s.Z,{fallback:(0,c.jsx)(l.zx,{disabled:!0,text:v}),children:(0,c.jsx)(u,{onCopy:k,text:e,children:(0,c.jsx)(l.rU,{display:"inline",href:"",children:v})})})}):(0,c.jsxs)(l.xu,{alignItems:"center",display:"flex",paddingX:4*!m,children:[!m&&(0,c.jsx)(l.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(l.nv,{id:"copylinkurl",onChange:()=>{},onFocus:a,size:"lg",type:"url",value:e})}),(0,c.jsx)(i.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(s.Z,{fallback:(0,c.jsx)(l.zx,{disabled:!0,text:v}),children:(0,c.jsx)(u,{onCopy:k,text:e,children:(0,c.jsx)(l.zx,{size:g,text:v})})})})]})}},102083:(e,a,n)=>{n.d(a,{Z:()=>_});var t=n(667294),l=n(20256),i=n(19963),o=n(233846),r=n(395986),s=n(755090),d=n(861084),c=n(785893);let u=e=>({invite_category:3,invite_channel:12,object_type:1,object_id:e,path:null});function _({pinId:e,variant:a,onSendButtonClick:n,dismissPriorToast:_}){let p=(0,o.ZP)(),{logContextEvent:m}=(0,i.v)(),[g,y]=(0,t.useState)(null),[h,b]=(0,t.useState)(!1),{logShareInvite:w,createShareInviteData:v}=(0,r.Z)(),k=()=>{null===g||h||(b(!0),w(u(e),g))},f=()=>{m({event_type:101,component:14162,element:72,object_id_str:e})};return(0,s.Z)(()=>{(async()=>{y(await v({invite_category:3,invite_channel:12,object_type:"pin",object_id:e,path:""}))})()}),"copy_link"===a?(0,c.jsxs)(l.xu,{"data-test-id":"post-download-copy-link",children:[p._('Image downloaded to your device. ', 'context_menu.pin_downloaded.toastText', 'toast message to confirm when users downloaded a pin image'),(0,c.jsx)(d.Z,{asLink:!0,buttonSize:"sm",hideInput:!0,linkURL:g?.invite_url||"",onCopyText:p._('Copied link to your clipboard to share', 'context_menu.pin_downloaded.copy_link_button_activate', 'notify the user that the link is now copied to their clipboard'),onDidClickCopyButton:()=>{k(),f()},onDidFocus:k,oneToast:!0,toastDuration:5e3})]}):(0,c.jsxs)(l.xu,{"data-test-id":"post-download-share-pin",children:[p._('Image downloaded to your device. ', 'context_menu.pin_downloaded.toastText', 'toast message to confirm when users downloaded a pin image'),(0,c.jsx)(l.rU,{accessibilityLabel:p._('Share Pin', 'context_menu.pin_downloaded.share_pin_button', 'toast message that shows share pin sharesheet invite CTA'),display:"inline",href:"",onClick:({event:e})=>{_(),n(e),f()},children:p._('Share Pin', 'context_menu.pin_downloaded.share_pin_button', 'toast message that shows share pin sharesheet invite CTA')})]})}},178901:(e,a,n)=>{n.d(a,{H:()=>r,Z:()=>o});var t=n(547504),l=n(943369),i=n(112800);async function o({filename:e,imgSrc:a,imageDownloadSuccessCallback:n,category:t,pinId:l,viewParameter:o,viewType:r,isUnauth:s=!1,platform:d="web",expName:c,expGroup:u},_){return"undefined"==typeof window?Promise.resolve():((0,i.My)("web.download.click",{category:t||"no_category",authType:s?"unauth":"auth",platform:d,viewType:r,expName:c,expGroup:u}),_({event_type:82,object_id_str:l,view_type:r||3,view_parameter:o||139}),a&&document)?fetch(a,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(e=>e.blob()).then(a=>{let l=document.createElement("a");l.href=window.URL.createObjectURL(a),l.setAttribute("download",e&&e.replace(".","_")),l.style.display="none",document.body?.appendChild(l),l.click(),document.body?.removeChild(l),(0,i.My)("web.download.success",{category:t||"no_category",authType:s?"unauth":"auth",platform:d,viewType:r,expName:c,expGroup:u}),n?.()}).catch(()=>{throw(0,i.My)("web.download.failure",{category:t||"no_category",authType:s?"unauth":"auth",platform:d,viewType:r,expName:c,expGroup:u}),Error("Download image error")}):Promise.resolve()}let r=e=>{let a=(0,l.M0)(),n=e("unuath_download_paywalled").anyEnabled;if(!a.accessAllowed||n)return{limitReached:!0,oldCount:0,newCount:0};let i=a.getItem(t.rN)||0,o=i>=1,r=o?i:i+1;return i!==r&&(0,l.M0)().setItem(t.rN,r),{limitReached:o,oldCount:i,newCount:r}}},4639:(e,a,n)=>{n.d(a,{Z:()=>T,e:()=>E});var t,l=n(667294),i=n(545007);n(167912);var o=n(20256),r=n(19963),s=n(231333),d=n(78039),c=n(233846),u=n(787642),_=n(883995),p=n(859492),m=n(414686),g=n(622809),y=n(967312),h=n(174646),b=n(676620),w=n(112800),v=n(339908),k=n(34632),f=n(538645),x=n(102083),S=n(178901),I=n(507815),L=n(785893);let C=void 0!==t?t:t=n(479335);function E({seoDrawerPinType:e}){let{checkExperiment:a}=(0,y.F)(),{isAuthenticated:n,isBot:t,locale:l}=(0,h.B)(),i=(0,f.ml)(),o=(0,f.HG)(),r=!n&&!t,{userIsEligibleForShippedLOPExperiment:s}=(0,u.Z)(),d=r&&o&&"closeup_feed"===e&&s(),c="en-US"===l||"en-CA"===l,_=r&&!i&&c&&a("unauth_dweb_download_cta").anyEnabled,p=r&&i&&c&&a("unauth_mweb_download_cta").anyEnabled,m=r&&o&&"closeup"===e&&!_&&a("unauth_dweb_download_closeup_icon").anyEnabled,g=r&&!o&&!p&&a("unauth_mweb_download_closeup_icon").anyEnabled;return{showDownloadIconForRelatedPins:d,inDwebDownloadCTAExp:_,inMwebDownloadCTAExp:p,inDwebDownloadCloseupIconExp:m,inMwebDownloadCloseupIconExp:g,inDwebSwapDownloadUpsellExp:r&&o&&a("unauth_dweb_swap_download_upsell").anyEnabled,inMwebSwapDownloadUpsellExp:r&&!o&&a("unauth_mweb_swap_download_upsell").anyEnabled}}let T=({pinKey:e,onSendButtonClick:a,seoDrawerPinType:n})=>{let t,u=(0,d.Z)(C,e),h=(0,b.Z)(),{checkExperiment:T}=(0,y.F)(),D=(0,i.I0)();try{t=(0,I.v)().unauthUserStateDispatch}catch{t=void 0}let{logContextEvent:P}=(0,r.v)(),{showOneToast:F}=(0,v.F9)(),j=(0,c.ZP)(),A=(0,f.HG)(),R=u?.entityId??"",{category:U}=u||{},K=(0,g.Z)(u),O=(0,m.Z)(u,K),Z=u?.richSummary?.displayName??"",Q=u?.richMetadata?.title??"",G=u?.richMetadata?.description??"",M=u?.storyPinData?.metadata?.pinTitle,H=u?.pinJoin?.visualAnnotation||void 0,N=(0,p.Ly)({pinTitle:u?.title,gridTitle:u?.gridTitle,richSummaryDisplayName:Z,richMetadataTitle:Q,storyPinDataId:u?.storyPinDataId,storyPinDataMetadataPinTitle:M,pinJoinVisualAnnotation:H}),z=(0,_.Z)({storyPinDataId:u?.storyPinDataId,pinDescription:u?.description,richMetadataDescription:G,richSummaryDisplayName:Z,closeupDescription:u?.closeupDescription,closeupUnifiedDescription:u?.closeupUnifiedDescription}),W=T("dweb_upsell_manager_redux"),{showDownloadIconForRelatedPins:q,inDwebDownloadCTAExp:V,inMwebDownloadCTAExp:$,inDwebDownloadCloseupIconExp:B,inMwebDownloadCloseupIconExp:J,inDwebSwapDownloadUpsellExp:Y,inMwebSwapDownloadUpsellExp:X}=E({seoDrawerPinType:n}),ee=V||$||q||B&&"enabled_immediate_upsell"===T("unauth_dweb_download_closeup_icon").group||J&&"enabled_immediate_upsell"===T("unauth_mweb_download_closeup_icon").group||Y&&("enabled_immediate_upsell"===T("unauth_dweb_swap_download_upsell").group||"enabled_immediate_signup_upsell"===T("unauth_dweb_swap_download_upsell").group)||X&&("enabled_immediate_upsell"===T("unauth_mweb_swap_download_upsell").group||"enabled_immediate_signup_upsell"===T("unauth_mweb_swap_download_upsell").group),ea="action_bar_ellipsis";q?ea="related_pin_action_bar_download":V?ea="dweb_download_cta":$?ea="mweb_download_cta":B?ea="dweb_download_closeup_icon":J?ea="mweb_download_closeup_icon":Y?ea="dweb_swap_download_upsell":X&&(ea="mweb_swap_download_upsell");let en="enabled_immediate_signup_upsell"===T("unauth_dweb_swap_download_upsell").group||"enabled_immediate_signup_upsell"===T("unauth_mweb_swap_download_upsell").group;return(0,l.useCallback)(()=>{let{limitReached:e,oldCount:n,newCount:l}=(0,S.H)(T);if(q?(0,w.My)("dweb.unauth.action_bar.download_image",{attributionLabelSource:ea,limitReached:e,oldCount:n,newCount:l}):V?(0,w.My)("dweb.unauth.download_cta.download_image",{attributionLabelSource:ea}):$?(0,w.My)("mweb.unauth.download_cta.download_image",{attributionLabelSource:ea}):B?(0,w.My)("dweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:ea}):J?(0,w.My)("mweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:ea}):Y?(0,w.My)("dweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:ea}):X?(0,w.My)("mweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:ea}):A?(0,w.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:ea,limitReached:e,oldCount:n,newCount:l}):(0,w.My)("mweb.unauth.context_menu.download_image",{attributionLabelSource:ea,limitReached:e,oldCount:n,newCount:l}),e||ee)return void($||J?h({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:`click_${ea}_download_button`,mobileOptions:{headingType:"download_limit_reached"}}):W.anyEnabled||ee&&!en?D((0,k.QG)(R)):Y&&!en?h({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:`click_${ea}_download_button`,desktopOptions:{modalType:"login",modalOptions:{source:"lopDownloadUpsell",container:"lopDownloadUpsell"}}}):X&&!en?h({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:`click_${ea}_download_button`,mobileOptions:{headingType:"lopDownloadUpsell"}}):h({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:`click_${ea}_download_button`,desktopOptions:{modalType:"signup",modalOptions:{source:"downloadImageBtnUnauth",container:"download",savePinId:R}}}));(0,S.Z)({filename:N||z||R,imgSrc:O||"",category:U,pinId:R,isUnauth:!0,platform:"web",imageDownloadSuccessCallback:()=>{t&&t({type:"UPDATE"})}},P),F(({hideToast:e})=>(0,L.jsx)(s.Z,{duration:5e3,onHide:e,text:(0,L.jsx)(o.xv,{color:"inverse",children:(0,L.jsx)(x.Z,{dismissPriorToast:e,onSendButtonClick:a??(()=>{}),pinId:R,variant:"sharesheet"})}),thumbnail:{image:(0,L.jsx)(o.Ee,{alt:j._('Image of downloaded Pin', 'context_menu.pin_downloaded.altImageText', 'Alt text for image shown when downloading pin'),fit:"cover",naturalHeight:32,naturalWidth:32,src:O})}}))},[T,ea,N,z,R,O,U,P,q,V,ee,$,B,J,Y,X,en,F,W.anyEnabled,D,h,a,j,A,t])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/4639-adcac13defbf4ed3.mjs.map